<div class="mr-5 mt-4">
  <h1 class="text-4xl font-bold text-center">Irakaslearen espazioa</h1>
</div>

<!-- First Row: User Data and Schedule -->
<div class="grid grid-cols-2 gap-4 p-6">
  <!-- User Data Section -->
  <div class="col-span-1">
    <p-card header="Irakaslearen datuak" class="shadow-lg rounded-lg">
      <div class="flex items-center p-6">
        <img
          [src]="getLoggedUser() | photosPipe"
          alt="User Photo"
          class="rounded-full w-24 h-24 shadow-md mr-6"
        />
        <div>
          <p class="font-bold text-5xl mb-5">
            {{ user?.nombre }} {{ user?.apellidos }}
          </p>
          <p class="text-gray-400 text-lg">E-mail: {{ user?.email }}</p>
        </div>
      </div>
    </p-card>
  </div>

  <!-- Schedule Section -->
  <div class="col-span-1">
    <p-card header="Ordutegia" class="shadow-lg rounded-lg">
      <p-table showGridlines>
        <ng-template pTemplate="header">
          <tr>
            <th>{{ schedule?.dia }}</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-schedule>
          <tr>
            <td>{{ schedule?.dia }}</td>
            <td>{{ schedule?.hora }}</td>
            <td>{{ schedule?.modulo }}</td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>
</div>

<!-- Divider -->
<p-divider type="solid" />

<!-- Meetings Section -->
<div class="mt-3 ml-6 mb-4">
  <h2 class="text-3xl font-semibold text-white">Bilerak</h2>
</div>
<div class="col-span-1 md:col-span-2 lg:col-span-3">
  <app-bilerak-card />
</div>

<!-- Divider -->
<p-divider type="solid" />

<!-- Student Search Section -->
<div class="grid grid-cols-1 gap-4 p-6">
  <div class="col-span-1">
    <p-card header="Ikasleak bilatu" class="shadow-lg rounded-lg">
      <div class="p-6">
        <input
          type="text"
          class="form-control"
          placeholder="Bilatu NAN, izen-abizen edo zikloaren arabera..."
        />
        <button class="btn btn-primary mt-2" (click)="searchStudents()">
          Bilatu
        </button>
      </div>
      <div *ngIf="filteredStudents.length > 0" class="p-6">
        <p-table [value]="filteredStudents" class="p-datatable-gridlines">
          <ng-template pTemplate="header">
            <tr class="bg-gray-50">
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                NAN
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Izen-abizen
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Zikloa
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Xehetasunak
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-student>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">{{ student.nan }}</td>
              <td class="px-6 py-4 whitespace-nowrap">{{ student.name }}</td>
              <td class="px-6 py-4 whitespace-nowrap">{{ student.cycle }}</td>
              <td class="px-6 py-4 whitespace-nowrap">
                <a [routerLink]="['/student', student.id]" class="text-blue-500"
                  >Xehetasunak ikusi</a
                >
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </p-card>
  </div>
</div>
